---
title: "Class 9 notes and code"
output:
  html_document: default
  pdf_document: default
---





$\\$





```{r setup, include=FALSE}

# install.packages("latex2exp")

library(latex2exp)


options(scipen=999)


knitr::opts_chunk$set(echo = TRUE)

set.seed(123)

```



$\\$






## Overview

 * Review hypothesis tests for a single proportion
 * One vs two tailed tests
 * Permutation tests for two means
 * Permutation tests for two means in R
 * Permutation tests for more than two means (if there is time)





$\\$








## Part 1: Hypothesis tests for a single proportion





$\\$




Recall the five steps of hypothesis testing:

 0) Plot your data
 1) State the null and alternative hypotheses, and choose an alpha level
 2) Calculate the observed statistic 
 3) Create a null distribution:  distribution of statistics if $H_0$ were true
 4) Calculate the p-value: 
   - probability of getting a statistic from the null distribution more extreme than the observed statistic 
 5) Make a judgement


It would be useful to memorize these steps!



$\\$



## Do more than 25% of American's believe in ghosts? 

A telephone survey of 1000 randomly selected US adults found that 31% of them say they believe in ghosts. Does this provided evidence that more than 1 in 4 US adults believe in ghosts?  





##### Step 1: State the null and alternative hypotheses in symbols and words, and set up the rules of the game


**In words:** 

* Null hypothesis: 
* Alternative hypothesis: 


**Using symbols**

$H_0: $
$H_A: $



**Rules of the game**



$\alpha = $





$\\$




##### Step 2: Calculate the observed statistic

```{r ghost_obs_stat}


```





$\\$





##### Step 3: Create the null distribution



```{r null_dist_ghost}




```





$\\$






##### Step 4: Calculate a p-value


```{r p_value_ghost}



```




$\\$





##### Step 5: Make a decision









$\\$





![](https://i1.wp.com/flowingdata.com/wp-content/uploads/2014/06/Paranormal-distribution-smaller.png?w=400&ssl=1)



 
 
 
$\\$
 







## Part 2: One vs two tailed tests and permutation tests for comparing two sample means

Let's go through the logic of how to run a randomization (permutation) test for comparing 2 means...





## Part 3: Permutation tests for comparing two sample means in R



##### Step 0: Plot the data


```{r pill_plot}



treat <- c(7, -4, 18, 17, -3, -5,  1, 10, 11, -2)
control <- c(-1,  12,  -1,  -3,   3,  -5,   5,   2, -11,  -1,  -3)



# plot the data as a boxplot




# create a stripchart





```







##### Step 1: State the null and alternative hypotheses 


$H_0: $
$H_A: $


$\alpha = $




$\\$




##### Step 2: Calculate the observed statistic

```{r pill_obs_stat}




```



$\\$





##### Step 3: Create the null distribution



```{r null_dist_pill}


# combine the data from the treatment and control groups together





# use a for loop to create shuffled treatment and control groups and shuffled statistics 


        



# plot the null distribution as a histogram





```





$\\$






##### Step 4: Calculate a p-value


```{r p_value_pill}


# plot the null distribution again with a red line a the value of the observed statistic




# calculate the p-value





```




$\\$



##### Step 5: Make a decision







$\\$





![](https://raw.githubusercontent.com/emeyers/SDS230_F19/master/class_images/class_09/pills.jpg)





$\\$




## Part 4: Permutation tests for more than two sample means


Let's go through the logic of runing a test comparing more than two means...




$\\$




## Part 5: Permutation tests for more than two sample means in R



A group of Hope College students wanted to see if there was an association between a studentâ€™s major and the time it takes to complete a small Sudoku-like puzzle

They grouped majors into four categories
 * Applied science (as)
 * Natural science (ns)
 * Social science  (ss)
 * Arts/humanities (ah)




##### Step 0: Plot the data


```{r sudoku_plot}


# get the data
sudoku_data <- read.table('http://www.math.hope.edu/isi/data/chap9/MajorPuzzle.txt', header = TRUE)


# create a boxplot of the data




```




$\\$




##### Step 1: State the null and alternative hypotheses 


$H_0: $
$H_A: $ 


$\alpha = 



$\\$







##### Step 2: Calculate the observed statistic




```{r sudoku_obs_stat}


# we can use the by() function to get the means separately for each group
# (we will learn of a better way to do this later in the semester)
group_means <- as.vector(by(sudoku_data$time, sudoku_data$major, mean))


# a function to get the MAD statistic
get_MAD_stat <- function(group_means) {
  
  total <- 0
  
  for (iGroup1 in 1:(length(group_means) - 1)) {
    
    for (iGroup2 in (iGroup1 + 1):(length(group_means))){
      
      total <- total + abs(group_means[iGroup1] - group_means[iGroup2])
    
    }
  
  }
  
  total
  
}  # end of the function 



# apply this function to our data to get our observed statistic 


  

```






$\\$




##### Step 3: Create the null distribution


```{r sudoku_null_dist}


# create the null distribution here using a for loop and the get_MAD_stat() function 

  




# plot the null distribution as a histogram





```





##### Step 4: Calculate a p-value


```{r sudoku_p_value}


# plot the null distribution again with a line at the observed statistic




# calculate the p-value





```


$\\$





##### Step 5: Make a decision







$\\$









